<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.hiroki.rookie.portfolio.repository.master.MerchantMasterMapper">

	<select id="list" resultType="jp.hiroki.rookie.portfolio.dto.master.MasterDto">
	SELECT
		mm.id,
		mm.merchant_name AS name,
		mm.category_id AS categoryId,
		cm.category_name AS categoryName
	FROM mufg_credit_merchant_master mm
	LEFT JOIN category_master cm
		ON cm.id = mm.category_id
	ORDER BY mm.category_id
	</select>

	<update id="update">
		UPDATE mufg_credit_merchant_master
		SET category_id = ${categoryId}
		WHERE id = #{id}
	</update>

	<select id="findById">
		SELECT
			id,
			category_id AS categoryId
		FROM mufg_credit_merchant_master
		WHERE id = #{id}
	</select>

</mapper>